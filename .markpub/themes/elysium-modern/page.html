{% set page_title = title ~ ' - ' ~ wiki_title if title != 'README' else wiki_title %}{% include '_header.html' %}
<body class="font-roboto text-gray-800 bg-gray-50 leading-relaxed">
  <!-- Header -->
  <header>
    <div class="container nav">
      <a class="brand" href="/">
        <span class="logo" aria-hidden="true"></span>
        <span>{{wiki_title}}</span>
      </a>
      <div class="nav-spacer"></div>
      <nav class="nav-items" aria-label="Primary">
        <!-- Add navigation items -->
      </nav>
      <button class="btn-theme" onclick="toggleTheme()" aria-label="Toggle color theme">
        Theme: <span id="theme-label">Auto</span>
      </button>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-gradient-to-r from-blue-50 to-indigo-100 py-12">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl font-bold font-trebuchet text-gray-800 mb-4">
          {% if title != 'README' %}{{ title }}{% else %}{{ wiki_title }}{% endif %}
        </h1>
        {% if edit_url %}
        <div class="mt-4">
          <a target="_blank" href="{{edit_url}}"
             class="inline-block px-4 py-2 bg-blue-600 text-white text-sm font-trebuchet rounded-lg hover:bg-blue-700 transition-colors no-underline">
            Edit on {{git_forge}}
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </section>

  <!-- Main Container -->
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="max-w-4xl mx-auto">
      <!-- Main Content -->
      <main class="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
        <div class="prose prose-gray max-w-none">
          {{ markdown_body }}
        </div>

        {% if backlinks %}
        <hr class="my-8 border-gray-300">
        <div>
          <h4 class="text-lg font-semibold font-trebuchet text-gray-700 mb-4">Pages that link to this page</h4>
          <ul class="list-disc pl-5 space-y-2">
            {% for link in backlinks %}
            <li><a href="{{websiteroot}}{{link[0]}}" class="text-blue-600 hover:text-blue-800 transition-colors">{{link[1]}}</a></li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      </main>
    </div>
  </div>
  <script src="{{websiteroot}}/markpub-static/js/script.js"></script>
  {% if bluesky_comments_post %}
  <div id="bluesky-comments"></div>
  <script type="importmap">
    {
	"imports": {
	    "react": "https://esm.sh/react@18",
	    "react-dom/client": "https://esm.sh/react-dom@18"
	}
    }
  </script>
  <script type="module">
    import { createElement } from 'react'
    import { createRoot } from 'react-dom/client'
    import { BlueskyComments } from 'https://unpkg.com/bluesky-comments@0.9.0/dist/bluesky-comments.es.js'

    const uri = '{{bluesky_comments_post}}'
    const container = document.getElementById('bluesky-comments')
    const root = createRoot(container)
    root.render(
	createElement(BlueskyComments, {
	    "uri": uri,
	})
    )
  </script>
  {% endif %}
  {% include '_footer.html' %}
</body>
</html>
